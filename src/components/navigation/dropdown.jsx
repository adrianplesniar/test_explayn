import React, { useState } from 'react'
import { DropdownContainer } from '../styled'
import { useIntl, changeLocale } from 'gatsby-plugin-intl';

const Dropdown = ({ selected, setSelected }) => {
    const [isActive, setIsActive] = useState(false);
    const locale = useIntl().locale;
    const en = useIntl().formatMessage({ id: "dropdown.en"});
    const pl = useIntl().formatMessage({ id: "dropdown.pl"});
    const options = [en, pl];
    return (
        <DropdownContainer>
            <div className="dropdown-btn-wrapper" onClick={() => setIsActive(!isActive)}>
                <svg width="13" height="14" viewBox="0 0 13 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6.50107 13.432C7.73319 13.4308 8.9373 13.0644 9.96119 12.379C10.9851 11.6936 11.7828 10.72 12.2535 9.58135C12.7242 8.44268 12.8467 7.19002 12.6056 5.98172C12.3645 4.77342 11.7706 3.66372 10.8989 2.7929C10.0273 1.92208 8.91701 1.32923 7.70847 1.08929C6.49994 0.849353 5.2474 0.973098 4.10919 1.44488C2.97097 1.91667 1.99818 2.71531 1.31377 3.73987C0.629363 4.76442 0.264072 5.96888 0.264071 7.201C0.263676 8.01988 0.424774 8.83081 0.738147 9.58735C1.05152 10.3439 1.51101 11.0312 2.09033 11.61C2.66965 12.1887 3.35741 12.6476 4.11426 12.9602C4.87111 13.2729 5.68219 13.4332 6.50107 13.432ZM2.18307 9.693L4.02607 9.693C4.22114 10.4647 4.50996 11.2095 4.88607 11.911C3.7475 11.5211 2.78777 10.7335 2.18307 9.693ZM6.49507 12.161C5.97175 11.406 5.57019 10.5735 5.30507 9.694H7.68507C7.41995 10.5735 7.0184 11.406 6.49507 12.161ZM11.3181 5.955C11.534 6.77163 11.534 7.63037 11.3181 8.447H9.21207C9.26627 8.03381 9.29533 7.61771 9.29907 7.201C9.29533 6.78429 9.26627 6.36819 9.21207 5.955H11.3181ZM10.8071 4.709H8.96907C8.774 3.93734 8.48519 3.19246 8.10907 2.491C9.24681 2.88014 10.2052 3.66802 10.8071 4.709ZM8.96907 9.693H10.8071C10.2047 10.7344 9.24556 11.5223 8.10707 11.911C8.48388 11.2096 8.77337 10.4648 8.96907 9.693ZM6.49507 2.241C7.0184 2.99599 7.41995 3.82846 7.68507 4.708L5.30507 4.708C5.57019 3.82846 5.97175 2.99599 6.49507 2.241ZM5.03707 5.955H7.95307C8.01472 6.36757 8.04813 6.78388 8.05307 7.201C8.04837 7.61814 8.01496 8.03445 7.95307 8.447H5.03707C4.97518 8.03445 4.94177 7.61814 4.93707 7.201C4.94202 6.78388 4.97543 6.36757 5.03707 5.955ZM4.88107 2.491C4.50496 3.19246 4.21614 3.93734 4.02107 4.709H2.18307C2.78704 3.66901 3.74561 2.88156 4.88307 2.491H4.88107ZM3.78107 5.955C3.72687 6.36819 3.69781 6.78429 3.69407 7.201C3.69782 7.61771 3.72687 8.03381 3.78107 8.447L1.67507 8.447C1.45913 7.63037 1.45913 6.77163 1.67507 5.955L3.78107 5.955Z" fill="black"/>
                </svg>
                {selected}
                {isActive ? (
                    <svg width="12" height="6" viewBox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg" style={{transform: 'rotate(180deg)'}}>
                        <path d="M0.889954 0.662994L5.96595 5.73899L11.042 0.662994H0.889954Z" fill="black"/>
                    </svg>
                ) : (
                    <svg width="12" height="6" viewBox="0 0 12 6" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0.889954 0.662994L5.96595 5.73899L11.042 0.662994H0.889954Z" fill="black"/>
                    </svg>
                )}
            </div>
            {isActive && (
                <div className="dropdown-content">
                    {options.map((option) => (
                        <div onClick={() => {
                            setSelected(option);
                            setIsActive(false);
                            locale === 'pl' && option !== selected && changeLocale('en');
                            locale === 'en' && option !== selected && changeLocale('pl');
                        }}
                            className="dropdown-item"
                            style={{display: 'flex'}}
                        >
                        {option === selected ? (
                            <svg width="13" height="14" viewBox="0 0 13 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6.4959 1.69596C7.73737 1.6971 8.94005 2.12859 9.89909 2.91694C10.8581 3.70528 11.5142 4.80173 11.7556 6.01951C11.9969 7.23729 11.8087 8.50109 11.2228 9.59563C10.637 10.6902 9.68979 11.5478 8.54261 12.0223C7.39542 12.4969 6.1192 12.5591 4.9313 12.1983C3.74341 11.8376 2.71733 11.0761 2.02783 10.0437C1.33834 9.01133 1.02807 7.77182 1.14989 6.53635C1.2717 5.30087 1.81806 4.14582 2.6959 3.26796C3.19377 2.76752 3.78602 2.37088 4.43832 2.10103C5.09062 1.83119 5.78999 1.6935 6.4959 1.69596ZM6.4959 0.860962C5.26966 0.860962 4.07095 1.22459 3.05137 1.90585C2.03178 2.58712 1.23711 3.55542 0.767848 4.68832C0.298585 5.82123 0.175804 7.06784 0.415032 8.27052C0.654261 9.4732 1.24475 10.5779 2.11184 11.445C2.97892 12.3121 4.08366 12.9026 5.28634 13.1418C6.48902 13.3811 7.73564 13.2583 8.86854 12.789C10.0014 12.3198 10.9697 11.5251 11.651 10.5055C12.3323 9.48591 12.6959 8.28721 12.6959 7.06096C12.6959 5.41662 12.0427 3.83963 10.88 2.6769C9.71724 1.51417 8.14024 0.860962 6.4959 0.860962Z" fill="#465DEA" />
                                <path d="M9.34394 4.21695C8.68482 3.55706 7.81726 3.14616 6.88912 3.05426C5.96098 2.96236 5.02969 3.19516 4.25396 3.71297C3.47823 4.23079 2.90606 5.00158 2.63497 5.894C2.36388 6.78641 2.41064 7.74522 2.76727 8.60702C3.12391 9.46882 3.76836 10.1803 4.5908 10.6202C5.41323 11.06 6.36275 11.2011 7.27755 11.0193C8.19235 10.8376 9.0158 10.3442 9.60759 9.62332C10.1994 8.90243 10.5229 7.99863 10.5229 7.06595C10.5247 6.53668 10.4214 6.01233 10.219 5.52328C10.0166 5.03424 9.71917 4.59021 9.34394 4.21695Z" fill="#465DEA" />
                            </svg>
                        ) : (
                            <svg width="13" height="14" viewBox="0 0 13 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6.4959 1.69596C7.73737 1.6971 8.94005 2.12859 9.89909 2.91694C10.8581 3.70528 11.5142 4.80173 11.7556 6.01951C11.9969 7.23729 11.8087 8.50109 11.2228 9.59563C10.637 10.6902 9.68979 11.5478 8.54261 12.0223C7.39542 12.4969 6.1192 12.5591 4.9313 12.1983C3.74341 11.8376 2.71733 11.0761 2.02783 10.0437C1.33834 9.01133 1.02807 7.77182 1.14989 6.53635C1.2717 5.30087 1.81806 4.14582 2.6959 3.26796C3.19377 2.76752 3.78602 2.37088 4.43832 2.10103C5.09062 1.83119 5.78999 1.6935 6.4959 1.69596ZM6.4959 0.860962C5.26966 0.860962 4.07095 1.22459 3.05137 1.90585C2.03178 2.58712 1.23711 3.55542 0.767848 4.68832C0.298585 5.82123 0.175804 7.06784 0.415032 8.27052C0.654261 9.4732 1.24475 10.5779 2.11184 11.445C2.97892 12.3121 4.08366 12.9026 5.28634 13.1418C6.48902 13.3811 7.73564 13.2583 8.86854 12.789C10.0014 12.3198 10.9697 11.5251 11.651 10.5055C12.3323 9.48591 12.6959 8.28721 12.6959 7.06096C12.6959 5.41662 12.0427 3.83963 10.88 2.6769C9.71724 1.51417 8.14024 0.860962 6.4959 0.860962Z" fill="#828282" />
                            </svg>
                        )}
                            {option}
                        </div>
                    ))}
                </div>
            )}
        </DropdownContainer>
    )
}

export default Dropdown;